graphs:
- id: ml_job
  nodes:
  - id: preprocess
    entrypoints:
      main:
        version: v1
        handler: examples.caching.ml_pipeline:preprocess
        runtime: python:3.8
        codeurl: null
        image: nilabhra/pirlib
    framework: null
    config:
      cache: true
      cache_key_file: hparams
    inputs:
    - id: dataset
      iotype: DIRECTORY
      source:
        node_id: null
        subgraph_id: null
        output_id: null
        graph_input_id: raw_data
      meta:
        name: dataset
        annotations: null
    - id: hparams
      iotype: FILE
      source:
        node_id: null
        subgraph_id: null
        output_id: null
        graph_input_id: preproc_hp
      meta:
        name: hparams
        annotations: null
    outputs:
    - id: return
      iotype: DIRECTORY
      meta:
        name: return
        annotations: null
    meta:
      name: preprocess
      annotations: null
  - id: train
    entrypoints:
      main:
        version: v1
        handler: examples.caching.ml_pipeline:train
        runtime: python:3.8
        codeurl: null
        image: nilabhra/pirlib
    framework: null
    config:
      cache: true
      cache_key_file: hparams
    inputs:
    - id: preprocessed_dir
      iotype: DIRECTORY
      source:
        node_id: preprocess
        subgraph_id: null
        output_id: return
        graph_input_id: null
      meta:
        name: preprocessed_dir
        annotations: null
    - id: hparams
      iotype: FILE
      source:
        node_id: null
        subgraph_id: null
        output_id: null
        graph_input_id: train_hp
      meta:
        name: hparams
        annotations: null
    outputs:
    - id: return
      iotype: DIRECTORY
      meta:
        name: return
        annotations: null
    meta:
      name: train
      annotations: null
  - id: postprocess
    entrypoints:
      main:
        version: v1
        handler: examples.caching.ml_pipeline:postprocess
        runtime: python:3.8
        codeurl: null
        image: nilabhra/pirlib
    framework: null
    config:
      cache: true
      cache_key_file: hparams
    inputs:
    - id: preprocessed_dir
      iotype: DIRECTORY
      source:
        node_id: preprocess
        subgraph_id: null
        output_id: return
        graph_input_id: null
      meta:
        name: preprocessed_dir
        annotations: null
    - id: model_dir
      iotype: DIRECTORY
      source:
        node_id: train
        subgraph_id: null
        output_id: return
        graph_input_id: null
      meta:
        name: model_dir
        annotations: null
    - id: hparams
      iotype: FILE
      source:
        node_id: null
        subgraph_id: null
        output_id: null
        graph_input_id: postproc_hp
      meta:
        name: hparams
        annotations: null
    outputs:
    - id: return
      iotype: DIRECTORY
      meta:
        name: return
        annotations: null
    meta:
      name: postprocess
      annotations: null
  subgraphs: []
  inputs:
  - id: raw_data
    iotype: DIRECTORY
    meta:
      name: raw_data
      annotations: null
  - id: preproc_hp
    iotype: FILE
    meta:
      name: preproc_hp
      annotations: null
  - id: train_hp
    iotype: FILE
    meta:
      name: train_hp
      annotations: null
  - id: postproc_hp
    iotype: FILE
    meta:
      name: postproc_hp
      annotations: null
  outputs:
  - id: return
    iotype: DIRECTORY
    source:
      node_id: postprocess
      subgraph_id: null
      output_id: return
      graph_input_id: null
    meta:
      name: return
      annotations: null
  meta:
    name: ml_job
    annotations: null
