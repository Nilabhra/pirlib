# Copyright 2022 Petuum, Inc. All Rights Reserved.

graphs: list(include('graph'))
---
graph:
  name: str()
  id: str()
  nodes: list(include('node'))
  subgraphs: list(include("subgraph"))
  inputs: list(include("graph_input"))
  outputs: list(include("graph_output"))
  annotations: map()
---
node:
  name: str()
  id: str()
  entrypoints: map(include('entrypoint'))
  configs:
    framework: any(include('framework'), null())
  inputs: list(include('input'))
  outputs: list(include('output'))
  annotations: map()
---
subgraph:
  name: str()
  id: str()
  graph_id: str()
  config: map()
  inputs: list(include("input")) 
  outputs: list(include("output"))
---
graph_input:
  name: str()
  id: str()
  meta: include('meta_data')
---
graph_output:
  name: str()
  id: str()
  source: include("datasource")
  meta: include('meta_data')
---
input:
  meta: include('meta_data')
  source: include('datasource')
---
output:
  id: str()
  meta: include('meta_data')
---
meta_data:  # for backend data marshalling
  type: str()
  schema: map(required=False)
---
datasource:
  node_id: any(str(), null())
  subgraph_id: any(str(), null())
  output_id: any(str(), null())
  graph_input_id: any(str(), null())
---
entrypoint:
  version: str()
  codeurl: any(str(), null())
  handler: str()
  env:
    image: any(str(), null())
  runtime: str()